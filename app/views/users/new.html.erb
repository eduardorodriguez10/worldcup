<%= render 'form' %>

<script>
	$('#signup-button').prop("disabled", true);
	$('#register-email').prop("disabled", true);
	
	$('.form-input').keyup(function(){
		if(email_valid($('#register-email').val()) && passwords_match() && $('#register-firstname').val().length > 0 && $('#register-lastname').val().length >0)
			$('#signup-button').prop("disabled", false);
		else
			$('#signup-button').prop("disabled", true);
	});

	$('#register-password').keyup(function(){
		if($(this).val().length<8)
			$('#error-password').show();
		else 
			$('#error-password').hide();
		
		if($('#register-retype').val().length > 0)
			if($(this).val() != $('#register-retype').val())
				$('#error-retype').show();
			else 
				$('#error-retype').hide();
	});

	$('#register-retype').keyup(function(){
		if($(this).val() != $('#register-password').val())
			$('#error-retype').show();
		else 
			$('#error-retype').hide();
	});

 	function email_valid(email){
 		var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    	return re.test(email);
 	};

 	function passwords_match(){
 		return (($('#register-password').val().length > 7) && ($('#register-retype')).val() == $('#register-password').val())
 	};

</script>